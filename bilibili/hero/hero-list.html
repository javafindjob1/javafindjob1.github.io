<!-- 英雄 -->
<turbo-frame id="repo-content-turbo-frame">
  <style>
    .page-header .subnav {
      z-index: 1;
      min-width: 1332px;
    }

    body {
      min-width: 1332px;
    }

    .hero {
      display: flex;
      height: 100%;
      justify-content: center;
      position: relative;
    }

    .hero .container {
      flex-shrink: 1;
      position: relative;
      transform: scale(0.999);

      width: 100%;
      display: flex;
      justify-content: center;
    }

    .hero-nav {
      flex-shrink: 1;
    }

    /* #region英雄列表 */
    .hero ul.hero-list {
      position: relative;
      width: calc(1903px * 0.7);
      height: calc(1000px * 0.7);
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: center;

      flex-shrink: 1;
      /* background-color: #d2c075; */
    }

    .hero .hero-list a {
      width: 100%;
      height: 100%;
      /* 防止文本被选中，避免拖动 */
      user-select: none;
    }

    .hero .hero-list a::before {
      content: '';
      display: block;
      height: 100%;

    }

    .hero .hero-list a p {
      color: white;
      font-size: 0px;
      text-align: center;
    }

    .hero .hero-list a:hover p {
      color: white;
      font-size: 16px;
    }

    .hero .hero-list li:not([empty]):hover {
      border-radius: 10px;
    }

    #version-update-turbo-frame {
      position: absolute;
      top: -20px;
      right: 0;
    }

    /* #endregion */
  </style>
  <div class="hero">
    <div class="container">
      <!-- <div class="hero-nav" style="width:300px;height: 100px;background-color: red;">12341234</div> -->
      <ul class="hero-list">
        <!-- <li empty></li>
        <li><a href="#" data-turbo-frame="console-turbo-frame"></a></li>
        <li empty></li> -->

        <li>
          <turbo-frame id="console-turbo-frame" class="console">
          </turbo-frame>
        </li>
        <li>
          <turbo-frame id="version-update-turbo-frame" src="/bilibili/hero/version-update.html">

          </turbo-frame>
        </li>
      </ul>

      <!-- <div class="hero-nav" style="width:300px;height: 100px;background-color: red;">12341234</div> -->
    </div>



  </div>

  <script>

    (function () {
      // 获取URL中的锚点
      window._self = window._self || { type: "#mp" }
      const hash = window._self.type;
      if (hash === "#mp") {
        var locArr = [
          [0, 1903],
          [0, 413, 585, 757, 956, 1159, 1347, 1523, 1903],
          [0, 360, 545, 757, 956, 1159, 1347, 1583, 1903],
          [0, 280, 545, 757, 956, 1159, 1407, 1623, 1903],
          [0, 250, 495, 757, 956, 1159, 1437, 1693, 1903],
          [0, 1903],
        ]

        var heroArr = [
          [''],
          ['', 'O000', 'E011', 'E004', 'E008', 'E016', 'H00S', ''],
          ['', 'O001', 'O003', 'E015', 'H006', 'H007', 'H00H', ''],
          ['', 'O004', 'E01H', 'O00M', 'N06G', 'E014', 'H005', ''],
          ['', 'N02D', '', '', 'O002', 'H00B', 'H00U', ''],
          [''],
        ]

        var heightArr = [0, 50, 201, 362, 552, 721, 1000]

        var heroImg = 'https://p3-sign.toutiaoimg.com/tos-cn-i-6w9my0ksvp/c97723ed8c8043e480d6790975363a61~tplv-tt-origin-web:gif.jpeg?_iz=58558&from=article.pc_detail&lk3s=953192f4&x-expires=1736609776&x-signature=MWDHPhmPkKRr03CnMKYgGJKUCZA%3D'

        var mapId = 192822
      } else {
        var locArr = [
          [0, 1903],
          [0, 263, 416, 545, 717, 913, 1026, 1257, 1419, 1517, 1723, 1903],
          [0, 179, 351, 529, 717, 913, 1050, 1257, 1455, 1594, 1757, 1903],
          [0, 77, 323, 488, 717, 913, 1057, 1297, 1497, 1620, 1820, 1903],

          [0, 405, 717, 1065, 1303, 1620, 1903],
          [0, 1903],
        ]

        var heroArr = [
          [''],
          ['', 'H00X', 'H00F', 'H003', 'H00D', 'E006', 'O005', 'H002', 'O001', 'O000', ''],
          ['', 'U000', 'E003', 'E00Y', 'O003', 'H001', 'O002', 'N006', 'H005', 'H00E', ''],
          ['', 'U001', 'H000', 'O00J', 'H006', 'E021', 'H00G', 'E00T', 'E00C', 'E029', ''],
          ['', 'O010', '', 'E03O', 'O018', ''],
          [''],
        ]

        var heightArr = [0, 40, 216, 377, 567, 744, 1000]
        var heroImg = 'https://p3-sign.toutiaoimg.com/tos-cn-i-axegupay5k/994ee5ff602a4f74953ec88b4b4de6da~tplv-tt-origin-web:gif.jpeg?_iz=58558&from=article.pc_detail&lk3s=953192f4&x-expires=1736609776&x-signature=SDpnrLH%2FugNY8VDREqu5%2FuVhQAM%3D'

        var mapId = 193337
      }

      class Dom {
        constructor() {
          this.hero = document.querySelector(".hero")
          this.heroul = document.querySelector(".hero ul.hero-list")
          this.console = document.querySelector("#console-turbo-frame")
          this.updateModal = document.querySelector("#updateModal")
          this.update = document.querySelector("#repo-content-turbo-frame .update")
          this.updateA = document.querySelector("#repo-content-turbo-frame .update a")
          this.updateClose = document.querySelector("#updateModal .close")
        }
        get info() {
          return document.querySelector(".hero .info")
        }
      }
      var dom = new Dom()


      let height = 0;
      var ulHtml = ''

      for (let i = 0; i < heroArr.length; i++) {
        const height = (heightArr[i + 1] - heightArr[i]) * 0.7
        const offsety = heightArr[i] * -0.7
        for (let j = 0; j < heroArr[i].length; j++) {
          const heroId = heroArr[i][j]
          const width = (locArr[i][j + 1] - locArr[i][j]) * 0.7
          const offsetx = locArr[i][j] * -0.7

          if (heroId !== '') {
            let liHtml = `
            <li style="background: url('${heroImg}') no-repeat left top / 1332px 700px;width: ${width}px;height: ${height}px;background-position: ${offsetx}px ${offsety}px;">
                <a href="/bilibili/hero/hero-console.html" data-hero-id="${heroId}" data-turbo-frame="console-turbo-frame" class="no-drag" title=""></a>
            </li>`
            ulHtml += liHtml
          } else {
            let liHtml = `
            <li empty style="background: url('${heroImg}') no-repeat left top / 1332px 700px;width: ${width}px;height: ${height}px;background-position: ${offsetx}px ${offsety}px;">
            </li>`
            ulHtml += liHtml
          }

        }
      }
      dom.heroul.innerHTML = ulHtml + dom.heroul.innerHTML
      dom.heroul.style = "background-color: #d2c075;"


      // 英雄点击事件
      dom.heroul.addEventListener('click', e => {
        console.log("英雄点击事件", e.target.classList)
        e.target.tagName === 'A' && changeHeroInfo(e.target)
      })
      dom.console.setAttribute("r", new Date().getTime())
      dom.console.addEventListener('click', e => {
        e.target.tagName === 'A' && changeHeroInfo(e.target)
      })

      function changeHeroInfo(a) {
        const id = a.getAttribute('data-hero-id')
        console.log("id=====" + id)
        window._self.dataHeroId = id
      }


    })()
  </script>

</turbo-frame>