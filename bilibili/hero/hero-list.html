<!-- 英雄 -->
<turbo-frame id="repo-content-turbo-frame">
  <style>
    .hero {
      display: flex;
      height: 100%;
      justify-content: center;
    }

    .hero .container {
      flex-shrink: 1;
      margin: auto;
      position: relative;
      transform: scale(0.7);
    }

    .hero ul.hero-list {
      width: 1903px;
      height: 1008px;
      margin: auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: center;

      /* background-color: #d2c075; */
    }

    .hero .hero-list a {
      width: 100%;
      height: 100%;
      /* 防止文本被选中，避免拖动 */
      user-select: none;
    }

    .hero .hero-list a::before {
      content: '';
      display: block;
      height: 100%;

    }

    .hero .hero-list a p {
      color: white;
      font-size: 0px;
      text-align: center;
    }

    .hero .hero-list a:hover p {
      color: white;
      font-size: 16px;
    }

    .hero .hero-list li {
      flex-shrink: 1;
    }

    .hero .hero-list li:not(:last-child, :first-child, [empty]):hover {
      border-radius: 20px;
      /* transform: scale(1.2); */
    }
  </style>
  <div class="hero">
    <div class="container">
      <ul class="hero-list">
        <!-- <li empty></li>
        <li><a href="#" data-turbo-frame="console-turbo-frame"></a></li>
        <li empty></li> -->
      </ul>

      <turbo-frame id="console-turbo-frame" class="console">

      </turbo-frame>

    </div>

  </div>

  <script>
    (function () {

      // 获取URL中的锚点
      window._self = window._self || { type: "#mp" }
      const hash = window._self.type;
      if (hash === "#mp") {
        var locArr = [
          [1903],
          [413, 585, 757, 956, 1159, 1347, 1523, 1903],
          [360, 545, 757, 956, 1159, 1347, 1583, 1903],
          [280, 545, 757, 956, 1159, 1407, 1623, 1903],
          [250, 495, 757, 956, 1159, 1437, 1693, 1903],
          [1903],
        ]

        var heroArr = [
          [''],
          ['', 'O000', 'E011', 'E004', 'E008', 'E016', 'H00S', ''],
          ['', 'O001', 'O003', 'E015', 'H006', 'H007', 'H00H', ''],
          ['', 'O004', 'E01H', 'O00M', 'N06G', 'E014', 'H005', ''],
          ['', 'N02D',     '',     '', 'O002', 'H00B', 'H00U', ''],
          [''],
        ]

        var heightArr = [50, 151, 161, 190, 169, 286]

        var heroImg = 'https://p3-sign.toutiaoimg.com/tos-cn-i-6w9my0ksvp/c97723ed8c8043e480d6790975363a61~tplv-tt-origin-web:gif.jpeg?_iz=58558&from=article.pc_detail&lk3s=953192f4&x-expires=1736609776&x-signature=MWDHPhmPkKRr03CnMKYgGJKUCZA%3D'
      }else {
        var locArr = [
          [1903],
          [263, 416, 545, 717, 913, 1026, 1257, 1419, 1517, 1723, 1903],
          [179, 351, 529, 717, 913, 1050, 1257, 1455, 1594, 1757, 1903],
          [77,  323, 488, 717, 913, 1057, 1297, 1497, 1620, 1820, 1903],

          [405, 717, 1065, 1303, 1620, 1903],
          [1903],
        ]

        var heroArr = [
          [''],
          ['', 'H00X', 'H00F', 'H003', 'H00D', 'E006', 'O005', 'H002', 'O001', 'O000', ''],
          ['', 'U000', 'E003', 'E00Y', 'O003', 'H001', 'O002', 'N006', 'H005', 'H00E', ''],
          ['', 'U001', 'H000', 'O00J', 'H006', 'E021', 'H00G', 'E00T', 'E00C', 'E029', ''],
          ['', 'O010', '', 'E03O', 'O018', ''],
          [''],
        ]

        var heightArr = [40, 176, 161, 190, 179, 260]
        var heroImg = 'https://p3-sign.toutiaoimg.com/tos-cn-i-axegupay5k/994ee5ff602a4f74953ec88b4b4de6da~tplv-tt-origin-web:gif.jpeg?_iz=58558&from=article.pc_detail&lk3s=953192f4&x-expires=1736609776&x-signature=SDpnrLH%2FugNY8VDREqu5%2FuVhQAM%3D'
      }

      class Dom {
        constructor() {
          this.hero = document.querySelector(".hero")
          this.heroul = document.querySelector(".hero ul.hero-list")
          this.console = document.querySelector("#console-turbo-frame")
        }
        get info() {
          return document.querySelector(".hero .info")
        }
      }
      var dom = new Dom()


      let index = -1;
      let height = 0;

      var ulHtml = ''
      for (let i = 0; i < locArr.length; i++) {
        let preWidth = 0;

        let heroIndex = -1;
        locArr[i].forEach(function (v) {
          // <li empty></li>
          // <li><a href="#" data-turbo-frame="console-turbo-frame"></a></li>
          // <li empty></li> 

          // 英雄ID
          const heroId = heroArr[i][++heroIndex]
          if (heroId !== '') {
            let liHtml = `
            <li style="background: url('${heroImg}') no-repeat;background-position: -${preWidth}px -${height}px; width: ${v - preWidth}px;height: ${heightArr[i]}px;">
              <a href="/bilibili/hero/hero-console.html" data-hero-id="${heroId}" data-turbo-frame="console-turbo-frame" class="no-drag" title=""></a>
            </li>`
            ulHtml += liHtml
          } else {
            let liHtml = `
            <li empty style="background: url('${heroImg}') no-repeat;background-position: -${preWidth}px -${height}px; width: ${v - preWidth}px;height: ${heightArr[i]}px;">
            </li>`
            ulHtml += liHtml
          }
          preWidth = v

        })
        height += heightArr[i];

      }
      dom.heroul.innerHTML = ulHtml
      dom.heroul.style = "background-color: #d2c075;"


      // 英雄点击事件
      dom.heroul.addEventListener('click', e => {
        e.target.tagName == 'A' && changeHeroInfo(e.target)
      })
      dom.console.setAttribute("r", new Date().getTime())
      dom.console.addEventListener('click', e => {
        e.target.tagName == 'A' && changeHeroInfo(e.target)
      })

      function changeHeroInfo(a) {
        const id = a.getAttribute('data-hero-id')
        console.log("id=====" + id)
        window._self.dataHeroId = id
      }

    })()
  </script>
  
</turbo-frame>